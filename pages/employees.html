<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>従業員管理 - 勤怠管理システム</title>
  <link rel="stylesheet" href="../styles/common.css">
  <link rel="stylesheet" href="../styles/components.css">
  <link rel="stylesheet" href="../styles/layout.css">
</head>
<body>
  <!-- ヘッダー -->
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <a href="../dashboard.html" class="header-logo">勤怠管理</a>
        <nav class="header-nav">
          <a href="../dashboard.html" class="header-nav-link">ダッシュボード</a>
          <a href="punch.html" class="header-nav-link">打刻</a>
          <a href="gantt.html" class="header-nav-link">ガントチャート</a>
          <a href="reports.html" class="header-nav-link">レポート</a>
        </nav>
      </div>
      <div class="header-right">
        <a href="requests.html" class="header-nav-link">申請</a>
        <button id="time-mode-button" onclick="showTimeModeModal()" class="btn btn-sm btn-secondary" style="margin-right: var(--spacing-sm);">現実時間</button>
        <button onclick="logout()" class="btn btn-sm btn-secondary" style="margin-right: var(--spacing-sm);">ログアウト</button>
        <a href="profile.html" class="header-user" style="text-decoration: none;">
          <div class="header-user-avatar"></div>
          <span class="header-user-name"></span>
        </a>
      </div>
    </div>
  </header>

  <!-- 時間モード設定モーダル -->
  <div id="time-mode-modal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h2 class="modal-title">時間モード設定</h2>
        <button class="modal-close" onclick="closeTimeModeModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer; margin-bottom: var(--spacing-md);">
            <input type="radio" name="time-mode" id="time-mode-realtime" value="realtime" checked style="cursor: pointer;">
            <span>現実時間を採用</span>
          </label>
          <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer; margin-bottom: var(--spacing-md);">
            <input type="radio" name="time-mode" id="time-mode-virtual" value="virtual" style="cursor: pointer;">
            <span>仮想時間を採用</span>
          </label>
        </div>
        
        <div id="virtual-time-settings" style="display: none; margin-top: var(--spacing-lg); padding: var(--spacing-md); background: var(--bg-secondary); border-radius: var(--radius-md);">
          <div class="form-group">
            <label for="virtual-date" class="form-label required">日付</label>
            <input type="date" id="virtual-date" class="form-input" required>
          </div>
          <div class="form-group">
            <label for="virtual-time" class="form-label required">時刻</label>
            <input type="time" id="virtual-time" class="form-input" required>
          </div>
          <div class="form-help" style="color: var(--text-secondary); font-size: var(--font-size-sm);">
            注意: 仮想時間は過去の時間に戻すことはできません。
          </div>
        </div>
        
        <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-md); border-top: 1px solid var(--border-color);">
          <button onclick="resetDatabase()" class="btn btn-sm btn-danger" style="width: 100%;">データベースをリセット</button>
          <div class="form-help" style="color: var(--text-secondary); font-size: var(--font-size-sm); margin-top: var(--spacing-xs);">
            すべてのデータを削除し、スキーマを再適用します。時間モードも現実時間にリセットされます。
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button onclick="saveTimeMode()" class="btn btn-primary">保存</button>
        <button onclick="closeTimeModeModal()" class="btn btn-secondary">キャンセル</button>
      </div>
    </div>
  </div>

  <!-- サイドバー -->
  <aside class="sidebar">
    <ul class="sidebar-menu">
      <li class="sidebar-menu-item">
        <a href="../dashboard.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">📊</span>
          <span class="sidebar-menu-label">ダッシュボード</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="punch.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">⏰</span>
          <span class="sidebar-menu-label">打刻</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="gantt.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">📅</span>
          <span class="sidebar-menu-label">ガントチャート</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="requests.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">📝</span>
          <span class="sidebar-menu-label">申請・承認</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="employees.html" class="sidebar-menu-link active">
          <span class="sidebar-menu-icon">👥</span>
          <span class="sidebar-menu-label">従業員管理</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="company-settings.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">⚙️</span>
          <span class="sidebar-menu-label">企業設定</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="reports.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">📈</span>
          <span class="sidebar-menu-label">レポート</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="payslip.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">💰</span>
          <span class="sidebar-menu-label">給与明細</span>
        </a>
      </li>
      <li class="sidebar-menu-item">
        <a href="audit-logs.html" class="sidebar-menu-link">
          <span class="sidebar-menu-icon">🔍</span>
          <span class="sidebar-menu-label">監査ログ</span>
        </a>
      </li>
    </ul>
  </aside>

  <!-- メインコンテンツ -->
  <main class="main-content">
    <div class="page-header">
      <h1 class="page-title">従業員管理</h1>
      <p class="page-description">従業員の一覧・登録・編集を行います</p>
      <div class="page-actions">
        <a href="employee-invite.html" class="btn btn-primary">従業員を招待</a>
        <a href="departments.html" class="btn btn-secondary">部署管理</a>
        <a href="#modal-import" class="btn btn-secondary">CSVインポート</a>
        <button class="btn btn-secondary">CSVエクスポート</button>
      </div>
    </div>

    <!-- フィルタバー -->
    <div class="filter-bar">
      <div class="filter-group">
        <label class="filter-label">部署:</label>
        <select class="form-select filter-input">
          <option value="">すべて</option>
          <option value="sales">営業部</option>
          <option value="dev">開発部</option>
          <option value="hr">人事部</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">雇用形態:</label>
        <select class="form-select filter-input">
          <option value="">すべて</option>
          <option value="full">正社員</option>
          <option value="part">パート</option>
          <option value="contract">契約社員</option>
        </select>
      </div>
      <div class="filter-group">
        <label class="filter-label">検索:</label>
        <input type="text" class="form-input filter-input" placeholder="名前・メール・社員番号">
      </div>
      <div class="filter-group">
        <button class="btn btn-secondary">フィルタ適用</button>
      </div>
    </div>

    <!-- 従業員一覧 -->
    <div class="card">
      <div class="card-body">
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>社員番号</th>
                <th>氏名</th>
                <th>メールアドレス</th>
                <th>部署</th>
                <th>雇用形態</th>
                <th>雇用日</th>
                <th>ステータス</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>EMP001</td>
                <td>山田太郎</td>
                <td>yamada@example.com</td>
                <td>営業部</td>
                <td>正社員</td>
                <td>2020-04-01</td>
                <td><span class="badge badge-success">在籍</span></td>
                <td>
                  <a href="employee-detail.html" class="btn btn-sm btn-secondary">詳細</a>
                </td>
              </tr>
              <tr>
                <td>EMP002</td>
                <td>佐藤花子</td>
                <td>sato@example.com</td>
                <td>開発部</td>
                <td>正社員</td>
                <td>2021-06-01</td>
                <td><span class="badge badge-success">在籍</span></td>
                <td>
                  <a href="employee-detail.html" class="btn btn-sm btn-secondary">詳細</a>
                </td>
              </tr>
              <tr>
                <td>EMP003</td>
                <td>鈴木一郎</td>
                <td>suzuki@example.com</td>
                <td>人事部</td>
                <td>正社員</td>
                <td>2019-03-01</td>
                <td><span class="badge badge-success">在籍</span></td>
                <td>
                  <a href="employee-detail.html" class="btn btn-sm btn-secondary">詳細</a>
                </td>
              </tr>
              <tr>
                <td>EMP004</td>
                <td>田中次郎</td>
                <td>tanaka@example.com</td>
                <td>営業部</td>
                <td>契約社員</td>
                <td>2022-09-01</td>
                <td><span class="badge badge-warning">休職中</span></td>
                <td>
                  <a href="employee-detail.html" class="btn btn-sm btn-secondary">詳細</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- ページネーション -->
        <div class="pagination">
          <a href="#" class="pagination-link" style="pointer-events: none; opacity: 0.5;">&laquo;</a>
          <a href="#" class="pagination-link active">1</a>
          <a href="#" class="pagination-link">2</a>
          <a href="#" class="pagination-link">3</a>
          <a href="#" class="pagination-link">&raquo;</a>
        </div>
      </div>
    </div>

    <!-- CSVインポートモーダル -->
    <div id="modal-import" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">CSVインポート</h2>
          <a href="#" class="modal-close">&times;</a>
        </div>
        <div class="modal-body">
          <div class="alert alert-info">
            <strong>従業員インポート仕様（仕様書11.1）:</strong><br>
            必須ヘッダ: <code>employee_code</code>, <code>name</code>, <code>email</code>, <code>dept_code</code>, <code>employment_type</code>, <code>hire_date</code><br>
            任意ヘッダ: <code>leave_date</code>, <code>work_location_tz</code><br>
            文字コード: UTF-8、日付形式: ISO8601（例: 2025-01-15）
          </div>
          <form>
            <div class="form-group">
              <label for="csv-file" class="form-label required">CSVファイル</label>
              <input 
                type="file" 
                id="csv-file" 
                name="csv-file" 
                class="form-input"
                accept=".csv"
                required
              >
              <div class="form-help">UTF-8エンコードのCSVファイルを選択してください。重複するemployee_codeはエラーになります</div>
            </div>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: var(--spacing-xs); cursor: pointer;">
                <input type="checkbox" name="skip-duplicates" style="cursor: pointer;">
                <span>重複データをスキップ（推奨: オフ）</span>
              </label>
              <div class="form-help" style="font-size: var(--font-size-xs); color: var(--text-tertiary); margin-top: var(--spacing-xs);">
                重複するemployee_codeがある場合、エラーとして報告されます（仕様書11.1）
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <a href="#" class="btn btn-secondary">キャンセル</a>
          <button type="submit" class="btn btn-primary">インポート開始</button>
        </div>
      </div>
    </div>
  </main>
  <script src="../scripts/common.js"></script>
</body>
</html>

